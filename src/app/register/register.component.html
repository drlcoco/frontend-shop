<!--  <div class="row cont text-center justify-content-center mt-4">
  <div class="col-8 d-flex flex-column">
     <form action="" method="POST" class="m-5 needs-validation" #registerForm = "ngForm" (ngSubmit)="addUser(fileUpload)"  novalidate>
      <div class="row d-flex justify-content-center ms-2 pt-3">
        <div class="col d-flex m-3 d-flex justify-content-center">
          <h1 class="fs-1  ps-5 ms-5">Regístrate. </h1>
          <h1 class="text-secondary ms-2 fs-1 fw-b">La mejor forma de comprar</h1>
        </div>
      </div>
        <div class="mb-3 row">
         <label for="name" [ngStyle]="{'color': !name.valid?'red':'green'}" class="col-sm-2 col-form-label mt-2">Nombre </label>
         <div class="col-sm-10">
           <input
             type="text"
             name="name"
             id="name"
             [ngClass]="{'is-valid': name.valid, 'is-invalid': !name.valid && name.touched}"
             class="form-control mt-2"
             placeholder="Introduzca el nombre"
             value=""
             #name = "ngModel"
             [(ngModel)] = "user.name"
             required
             pattern="[a-zA-ZÀ-ÿ\s]{1,40}"
           /> <small *ngIf="!name.valid && name.touched" class=" invalid-feedback d-flex is-invalid">El nombre no es válido</small>
         </div>
       </div>
       <div class="mb-3 row">
         <label for="surname" [ngStyle]="{'color': !surname.valid?'red':'green'}" class="col-sm-2 col-form-label mt-2">Apellidos </label>
         <div class="col-sm-10">
           <input
             type="text"
             name="surname"
             id="surname"
             [ngClass]="{'is-valid': surname.valid, 'is-invalid': !surname.valid && surname.touched}"
             class="form-control mt-2"
             placeholder="Introduzca los apellidos"
             value=""
             #surname = "ngModel"
             [(ngModel)] = "user.surname"
             required
             pattern="[a-zA-ZÀ-ÿ\s]{1,60}"
           /> <small *ngIf="!surname.valid && surname.touched" class=" invalid-feedback d-flex">Los apellidos no son válidos</small>
         </div>
       </div>
       <div class="mb-3 row">
         <label for="address" [ngStyle]="{'color': !address.valid?'red':'green'}" class="col-sm-2 col-form-label mt-2">Dirección </label>
         <div class="col-sm-10">
           <input
             type="text"
             name="address"
             id="address"
             [ngClass]="{'is-valid': address.valid, 'is-invalid': !address.valid && address.touched}"
             class="form-control mt-2"
             placeholder="Introduzca la dirección"
             value=""
             #address = "ngModel"
             [(ngModel)] = "user.address"
             required
           /> <small *ngIf="!address.valid && address.touched" class=" invalid-feedback d-flex">La dirección no es válida</small>
         </div>
       </div>
       <div class="mb-3 row">
        <label for="address" [ngStyle]="{'color': !phone.valid?'red':'green'}" class="col-sm-2 col-form-label mt-2">Teléfono</label>
         <div class="col-sm-10">
           <input
             type="number"
             name="phone"
             id="phone"
             [ngClass]="{'is-valid': phone.valid, 'is-invalid': !phone.valid && phone.touched}"
             class="form-control mt-2"
             placeholder="Introduzca el teléfono"
             value=""
             #phone = "ngModel"
             [(ngModel)] = "user.phone"
             required
             pattern="[0-9]{9}"
           /> <small *ngIf="!phone.valid && phone.touched" class=" invalid-feedback d-flex">El teléfono no es válido</small>
         </div>
       </div>
       <div class="mb-3 row">
        <label for="email" [ngStyle]="{'color': !email.valid?'red':'green'}" class="col-sm-2 col-form-label mt-2">Email </label>
        <div class="col-sm-10">
          <input
            type="email"
            name="email"
            id="email"
            [ngClass]="{'is-valid': email.valid, 'is-invalid': !email.valid && email.touched}"
            class="form-control mt-2"
            placeholder="Introduzca el correo electrónico"
            value=""
            #email = "ngModel"
            [(ngModel)] = "user.email"
            (keyup)="checkEmail()"
            required
            pattern="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])"
          /> <small *ngIf="!email.valid && email.touched" class=" invalid-feedback d-flex">El email no es válido</small>
           <div class="alert alert-danger mt-1" *ngIf="this.isEmailExist == true">
            Error!!! El email ya existe.
           </div>
        </div>
      </div>
       <div class="mb-3 row">
         <label for="password" [ngStyle]="{'color': !password.valid?'red':'green'}" class="col-sm-2 col-form-label mt-2">Password</label>
         <div class="col-sm-10">
           <input
             type="password"
             name="password"
             id="password"
             [ngClass]="{'is-valid': password.valid, 'is-invalid': !password.valid && password.touched}"
             class="form-control mt-2"
             placeholder="Introduzca la contraseña"
             value=""
             #password = "ngModel"
             [(ngModel)] = "user.password"
             required
             pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}"
           /> <small *ngIf="!password.valid && password.touched" class=" invalid-feedback d-flex">La contraseña no es válida, debe contener al menos 8 caracteres entre mayúsculas, minúsculas y números</small>
         </div>
         <label for="password2" [ngStyle]="{'color': !password2.valid || user.password2 !== user.password ?'red':'green'}" class="col-sm-2 col-form-label mt-4">Verificar</label>
         <div class="col-sm-10 mt-4">
           <input
             type="password"
             name="password2"
             id="password2"
             [ngClass]="{'is-valid': password2.valid && user.password2 === user.password, 'is-invalid': !password2.valid && password2.touched || user.password2 !== user.password && password2.touched}"
             class="form-control"
             placeholder="Verifique la contraseña"
             value=""
             #password2 = "ngModel"
             [(ngModel)] = "user.password2"
             required
             pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}"
           /> <small *ngIf="user.password !==  user.password2 && this.password2.touched" class=" invalid-feedback d-flex">La contraseña no coincide</small>
         </div>
       </div>
       <div class="mb-2 row">
        <label for="image" [ngStyle]="{'color': !ngImagen.valid?'red':'green'}" class="col-sm-2 col-form-label mt-2">Imagen</label>
        <div class="col-sm-10 mt-2">
          <input type="file" class="file-upload form-control" #fileUpload name="image" (ngModel)="user.image"
          #ngImagen="ngModel"
          [ngClass]="{'is-valid':ngImagen.valid, 'is-invalid': ngImagen.touched && !ngImagen.valid}"
          (change)="changeImage(fileUpload)" required />
          <div class="col-10">
            <div *ngIf="ngImagen.touched && ngImagen.invalid" class="alert alert-danger">
              Introduzca la imagen*
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="user.image" class="text-center mt-2">
        <img [src]="preview" alt="" id="preview" width="120">
      </div>
       <div class="row justify-content-center">
        <div class="col-sm-3" [ngClass]="{'icono': this.isEmailExist}">
          <button type="submit" [disabled]="registerForm.invalid || user.password !== user.password2 || this.isEmailExist == true" class="btn rounded" data-bs-toggle="modal" data-bs-target="#staticBackdrop"><img
          src="assets/img/register.jpg"
          alt="logo"
          class="imgLogin rounded mx-auto d-block"/>
          </button>
          <div class="alert alert-success" *ngIf="this.isRegistered == true">
            Ha sido registrado correctamente <a class="btn btn-primary" [routerLink]="['/login']">Logueate</a>
           </div>
           <div class="alert alert-danger" *ngIf="this.isRegistered == false">
            Error!!! El email ya existe, inténtelo de nuevo.
           </div>
        </div>
       </div>
     </form>
   </div>
 </div>

 -->






 <div class="container-fluid">
  <div class="row text-center justify-content-center my-4">
    <div class="col-xs-12 col-lg-10 p-5 mx-5">
      <h1 class="mt-5 text-primary text-center fs-1"><i class="bi bi-person-plus me-2"></i> Regístrate</h1>
      <form action="" method="POST" class="mt-5 fs-6 rounded-3 p-4 border border-primary darkThemeForm" #registerForm = "ngForm" (ngSubmit)="addUser(fileUpload)"  novalidate>
        <div class="row d-flex w-100">
          <div class="col-xs-12 col-md-6">
            <div class="form-group">
              <mat-form-field class="example-form-field col-12">
                <mat-label [ngStyle]="{ color: !name.valid ? 'red' : '#0d6efd' }">Nombre</mat-label>
                <input
                  matInput
                  class=""
                  type="text"
                  name="name"
                  id="name"
                  [(ngModel)]="user.name"
                  #name="ngModel"
                  [ngClass]="{'is-valid':name.touched && name.valid, 'is-invalid':name.touched && !name.valid}"
                  minlength="5" maxlength="30" required>
                <mat-error *ngIf="!name.valid && name.touched && !name.hasError('required')"
                  >
                  El nombre no es válido
                </mat-error>
                <mat-error *ngIf="name.hasError('required')">
                  Nombre <strong>requerido</strong>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field class="example-form-field col-12">
                <mat-label [ngStyle]="{ color: !surname.valid ? 'red' : '#0d6efd' }">Apellidos</mat-label>
                <input
                  matInput
                  class=""
                  type="text"
                  name="surname"
                  id="surname"
                  [(ngModel)]="user.surname"
                  #surname="ngModel"
                  [ngClass]="{'is-valid':surname.touched && surname.valid, 'is-invalid':surname.touched && !surname.valid}"
                  minlength="5" maxlength="90" required>
                <mat-error *ngIf="!surname.valid && surname.touched && !surname.hasError('required')"
                  >
                  El apellido no es válido
                </mat-error>
                <mat-error *ngIf="surname.hasError('required')">
                  Apellido <strong>requerido</strong>
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="col-xs-12 col-md-6">
            <div class="form-group">
              <mat-form-field class="example-form-field col-12">
                <mat-label [ngStyle]="{ color: !address.valid ? 'red' : '#0d6efd' }">Dirección</mat-label>
                <input
                  matInput
                  class=""
                  type="text"
                  name="address"
                  id="address"
                  [(ngModel)]="user.address"
                  #address="ngModel"
                  [ngClass]="{'is-valid':address.touched && address.valid, 'is-invalid':address.touched && !address.valid}"
                  minlength="5" maxlength="90" required>
                <mat-error *ngIf="!address.valid && address.touched && !address.hasError('required')"
                  >
                  La dirección no es válida
                </mat-error>
                <mat-error *ngIf="address.hasError('required')">
                  Dirección <strong>requerida</strong>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field class="example-form-field col-12">
                <mat-label [ngStyle]="{ color: !phone.valid ? 'red' : '#0d6efd' }">phone</mat-label>
                <input
                  matInput
                  class=""
                  type="number"
                  name="phone"
                  id="phone"
                  [(ngModel)]="user.phone"
                  pattern="[0-9]{9}"
                  #phone="ngModel"
                  [ngClass]="{'is-valid':phone.touched && phone.valid && phone.value > 0, 'is-invalid':phone.touched && !phone.valid}"
                  minlength="1" maxlength="30" required>
                <mat-error *ngIf="!phone.valid && phone.touched && !phone.hasError('required')"
                >
                  El teléfono no es válido, introduzca 9 números.
                </mat-error>
                <mat-error *ngIf="phone.hasError('required')">
                  Teléfono <strong>requerido</strong>
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="col-xs-12 col-md-6">
            <div class="form-group">
              <mat-form-field class="example-form-field col-12">
                <mat-label [ngStyle]="{ color: !email.valid ? 'red' : '#0d6efd' }">Email</mat-label>
                <input
                  matInput
                  class=""
                  type="email"
                  name="email"
                  id="email"
                  [(ngModel)]="user.email"
                  #email="ngModel"
                  [ngClass]="{'is-valid':email.touched && email.valid, 'is-invalid':email.touched && !email.valid}"
                  (keyup)="checkEmail()"
                  required
                  pattern="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])"
                  minlength="5" maxlength="90" required>
                <mat-error *ngIf="!email.valid && email.touched && !email.hasError('required')"
                  >
                  El email no es válido
                </mat-error>
                <mat-error *ngIf="email.hasError('required')">
                  Email <strong>requerido</strong>
                </mat-error>
              </mat-form-field>
              <div class="alert alert-danger mt-1" *ngIf="this.isEmailExist == true">
                Error!!! El email ya existe.
               </div>
            </div>
            <div class="form-group">
              <mat-form-field class="example-form-field col-12">
                <mat-label [ngStyle]="{ color: !password.valid ? 'red' : '#0d6efd' }">Password</mat-label>
                <input
                  matInput
                  class=""
                  type="password"
                  name="password"
                  id="password"
                  [(ngModel)]="user.password"
                  pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}"
                  #password="ngModel"
                  [ngClass]="{'is-valid': password.valid, 'is-invalid': !password.valid && password.touched}"
                  minlength="1" maxlength="30" required>
                <mat-error *ngIf="!password.valid && password.touched && !password.hasError('required')"
                >
                La contraseña no es válida, debe contener al menos 8 caracteres entre mayúsculas, minúsculas y números
                </mat-error>
                <mat-error *ngIf="password.hasError('required')">
                  Contraseña <strong>requerida</strong>
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="col-xs-12 col-md-6">
            <div class="form-group">
              <mat-form-field class="example-form-field col-12">
                <mat-label [ngStyle]="{ color: !postalCode.valid ? 'red' : '#0d6efd' }">Código Postal</mat-label>
                <input
                  matInput
                  class=""
                  type="text"
                  name="postalCode"
                  id="postalCode"
                  [(ngModel)]="user.postalCode"
                  #postalCode="ngModel"
                  pattern="[0-9]{1,5}"
                  [ngClass]="{'is-valid':postalCode.touched && postalCode.valid, 'is-invalid':postalCode.touched && !postalCode.valid}"
                  minlength="5" maxlength="30" required>
                <mat-error *ngIf="!postalCode.valid && postalCode.touched && !postalCode.hasError('required')"
                  >
                  El código postal no es válido
                </mat-error>
                <mat-error *ngIf="postalCode.hasError('required')">
                  Código postal <strong>requerido</strong>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="form-group">
              <mat-form-field class="example-form-field col-12">
                <mat-label [ngStyle]="{ color: !password2.valid || user.password !== user.password2 ? 'red' : '#0d6efd' }">Verify Password</mat-label>
                <input
                  matInput
                  class=""
                  type="password"
                  name="password2"
                  id="password2"
                  [(ngModel)]="user.password2"
                  pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}"
                  #password2="ngModel"
                  [ngClass]="{'is-valid': password2.valid
                  && user.password === user.password2
                  , 'is-invalid': !password2.valid && password2.touched}"
                  minlength="1" maxlength="30" required
                >
                <mat-error *ngIf="!password2.valid && password != password2 && password2.touched && !password2.hasError('required')">
                  La contraseña no coincide
                </mat-error>
                <mat-error *ngIf="password2.hasError('required')">
                  Contraseña <strong>requerida</strong>
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="col-12">
            <div class="form-group">
              <mat-form-field class="example-form-field col-12">
                <mat-label></mat-label>
                <div class="box-button">
                  <button type="button" class="btn btn-outline-primary btn-sm button-select">
                    <input
                    matInput
                    type="file"
                    class="file-upload file-button"
                    #fileUpload
                    name="image"
                    (change)="changeImage(fileUpload)"/>Seleccionar imagen</button>
                </div>
              </mat-form-field>
            </div>
            <div class="text-center mt-3">
              <img [src]="user.image" alt="" id="preview" width="200">
            </div>
            <!-- <div class="form-group my-3 text-center">
              <input type="submit" class="btn btn-primary w-50" value="Añadir" [disabled]="valForm.invalid || this.newProducto.stock === 0 || this.newProducto.price === 0" />
            </div> -->
            <div class="row justify-content-center">
              <div class="col-sm-3" [ngClass]="{'icono': registerForm.invalid || user.password !== user.password2 || this.isEmailExist == true}">
                <button type="submit" [disabled]="registerForm.invalid || user.password !== user.password2 || this.isEmailExist == true" class="btn rounded" data-bs-toggle="modal" data-bs-target="#staticBackdrop"><img
                src="assets/img/register.jpg"
                alt="logo"
                class="imgLogin rounded mx-auto d-block"/>
                </button>
                <div class="alert alert-success" *ngIf="this.isRegistered == true">
                  Ha sido registrado correctamente <a class="btn btn-primary" [routerLink]="['/login']">Logueate</a>
                </div>
                <div class="alert alert-danger" *ngIf="this.isRegistered == false">
                  Error!!! El email ya existe, inténtelo de nuevo.
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
